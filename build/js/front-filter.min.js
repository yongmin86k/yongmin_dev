"use strict";!function(n){var t=700,e=[],a=[];function i(){n.ajax({method:"get",url:ymk_api_works.rest_url+"wp/v2/work_taxonomies?per_page=100",timeout:3e3}).always(function(){}).fail(function(){}).done(function(n){(e=n).sort(function(n,t){return n.parent-t.parent})})}function o(){n.ajax({method:"get",url:ymk_api_works.rest_url+"wp/v2/work_roles?per_page=100",timeout:3e3}).always(function(){}).fail(function(){}).done(function(n){a=n})}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.removeClass("active"),e?e.parent().addClass("active"):t.filter(function(){n(this).children("input").prop("checked")&&n(this).addClass("active")})}function l(r){var l=void 0,s=void 0;void 0===r||"all"===r.val()?l=ymk_api_works.rest_url+"wp/v2/work_posts?per_page=4":(s=r.val(),l=ymk_api_works.rest_url+"wp/v2/work_posts?work_taxonomies="+s+"&per_page=4"),n.ajax({method:"get",url:l,timeout:3e3}).always(function(){}).fail(function(n){console.log(n)}).done(function(r){var l=r;l.forEach(function(n){n.work_taxonomies.sort(function(n,t){return n-t})}),l.forEach(function(n){n.work_roles.sort(function(n,t){return n-t})}),n("#contents-front-page-works").html(""),l.forEach(function(r,l){var s,c,d,f,u,p;d=(s=r.cmb2.work_details.date_start.slice(0,7).replace("-",". "))===(c=r.cmb2.work_details.date_end.slice(0,7).replace("-",". "))?s:s+" - "+c,f=r.featured_media,u=r.title.rendered,p=r.cmb2.work_details.work_url,n("#contents-front-page-works").append('\n                    <article id="ymk-works-'+l+'" class="article-works">\n                        <div class="article-feat-img"></div>\n                        <div class="article-contents">\n                            <div class="article-meta">\n                                <p class="work-date">'+d+'</p>\n                                <h3 class="work-title">'+u+'</h3>\n                                <a class="work-link" href="'+p+'">\n                                    Show details\n                                </a>\n                            </div>\n                            <div class="role-meta">\n                                <p class="role-meta-title">Roles</p>\n                                <div class="role-container"></div>\n                            </div>\n                            <div class="tag-meta"></div>\n                        </div>\n                    </article>\n               '),n("#ymk-works-"+l).fadeIn(t),r.work_roles.length>0&&r.work_roles.forEach(function(t){var e=void 0,i=void 0,r=void 0,s=void 0;a.length>0?(i=(e=a.find(function(n){if(n.id)return n.id===t})).id,r=e.link,s=e.name,n("#ymk-works-"+l).find(".role-container").append('\n                                <p class="role-element role-tag-id-'+i+'">\n                                    <a class="role-link" href="'+r+'">\n                                        '+s+"\n                                    </a>\n                                </p>                        \n                            ")):o()}),r.work_taxonomies.length>0&&r.work_taxonomies.forEach(function(t){var a=void 0,o=void 0,r=void 0,s=void 0,c=void 0;e.length>0?(o=(a=e.find(function(n){if(n.id)return n.id===t})).id,s=a.link,c=a.name,0===a.parent?n("#ymk-works-"+l).find(".tag-meta").append("\n                                    <div class='tag-container parent-tag-id-"+o+"'>\n                                        <p class=\"tag-element child-tag-id-"+o+'">\n                                            <a class="tag-link" href="'+s+'">\n                                                '+c+"\n                                            </a>\n                                        </p>\n                                    </div>\n                                "):(r=a.parent,n("#ymk-works-"+l).find(".parent-tag-id-"+r).append('\n                                    <p class="tag-element child-tag-id-'+o+'">\n                                        <a class="tag-link" href="'+s+'">\n                                            '+c+"\n                                        </a>\n                                    </p>\n                                "))):i()}),f&&function(e,a,i){n.ajax({method:"get",url:ymk_api_works.rest_url+"wp/v2/media/"+e,timeout:3e3}).always(function(){}).fail(function(n){console.log(n)}).done(function(e){var o=e.source_url;n("#"+a).find(".article-feat-img").append('\n                <a href="'+i+'">\n                    <img class="work-feat-img" src="'+o+'">\n                </a>\n            '),n("#"+a).find(".work-feat-img").fadeIn(t)})}(f,"ymk-works-"+l,p)})})}i(),o(),n(function(){if(n(".filter-txt").length>0){var t=n(".filter-txt");r(t),t.on("click","label",function(){r(t,n(this))}),l(),t.on("click","input",function(){l(n(this))})}})}(jQuery);